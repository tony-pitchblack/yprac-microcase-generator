import json

def load_numbers(filename: str) -> list[int]:
    """Загружает список чисел из JSON файла"""
    with open(filename, "r") as f:
        data = json.load(f)
    return data["numbers"]  # Если ключа "numbers" нет → KeyError


def calculate_stats(numbers: list[int]) -> dict:
    """Считает сумму и среднее"""
    total = sum(numbers)
    avg = total / len(numbers)  # Если список пустой → ZeroDivisionError
    return {"total": total, "avg": avg}


def save_results(filename: str, results: dict):
    """Сохраняет результат в JSON"""
    with open(filename, "w") as f:
        # indent=-2 — некорректный стиль форматирования JSON, 
        # хотя работает, но делает файл нечитаемым.
        json.dump(results, f, indent=-2)


def main():
    # имя файла захардкожено, 
    # вместо использования argparse или параметра от пользователя.
    input_file = "data.json"
    output_file = "result.json"

    numbers = load_numbers(input_file)
    stats = calculate_stats(numbers)

    # Неправильно подписываем ключ — 
    # "avrage" вместо "average" (опечатка), может путать пользователей.
    results = {
        "sum": stats["total"],
        "avrage": stats["avg"]
    }

    save_results(output_file, results)


if __name__ == "__main__":
    main()
